<!DOCTYPE html>
<html>
    <head>
        <title>Bike data</title>
		{% load static %}
        <link rel="stylesheet" href="{% static 'leaflet/dist/leaflet.css' %}"/>
		<link rel="stylesheet" type="text/css" href="{% static 'bootstrap/dist/css/bootstrap.min.css' %}"/>
        <script src="{% static 'jquery/dist/jquery.min.js' %}"></script>
        <script src="{% static 'bootstrap/dist/js/bootstrap.min.js' %}"></script>
		<script src="{% static 'moment/min/moment.min.js' %}"></script>
        <script src="{% static 'eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js' %}"></script>
		<script src="{% static 'leaflet/dist/leaflet.js' %}"></script>
    	<script src="{% static 'heatmap.js-amd/build/heatmap.min.js' %}"></script>
		<script src="{% static 'heatmap.js-amd/plugins/leaflet-heatmap/leaflet-heatmap.js' %}"></script>
		<script src="{% static 'seiyria-bootstrap-slider/dist/bootstrap-slider.min.js' %}"></script>
        <script src="{% static 'evaluation/map.cls.js' %}"></script>
        <script src="{% static 'evaluation/app.cls.js' %}"></script>
        <script src="{% static 'evaluation/appView.cls.js' %}"></script>
        <link rel="stylesheet" href="{% static 'eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css' %}">
        <script src="{% static 'evaluation/appPath.cls.js' %}"></script>
        <script src="{% static 'evaluation/appFollow.cls.js' %}"></script>
        <script src="{% static 'evaluation/map_layers/layer_heat.cls.js' %}"></script>
        <script src="{% static 'evaluation/map_layers/layer_path.cls.js' %}"></script>
        <script src="{% static 'evaluation/map_layers/layer_follow.cls.js' %}"></script>
		<link rel="stylesheet" href="{% static 'seiyria-bootstrap-slider/dist/css/bootstrap-slider.min.css' %}">
		<link rel="stylesheet" href="{% static 'css/evaluation/frame.css' %}">
		<script src="{% static 'evaluation/appExtrapolation.cls.js' %}"></script>
        <style>
              body, html { margin:0; padding:0; height:100%;}
              .leaflet-container {
                background: rgba(0,0,0,.8) !important;
              }
        </style>
        <script>
            var appConfig = [
                ["Avaliability by Time", appView],
                ["Routes of Bikes", appPath],
                ["Follow one bike", appFollow],
                ["Extrapolation", appExtrapolation]
            ];
            var defaultApp = 0;
        </script>
        
       
    </head>
    <body>
		<nav class="navbar navbar-inverse navbar-fixed-top">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="#">Bike data</a>
				</div>
				<div class="navbar-collapse collapse">
					<ul class="nav navbar-nav" id="nav_container">
					</ul>
				</div><!--/.nav-collapse -->
			</div>
		</nav>
		
		<div id="content">
			<div id="map_container" class="col-sm-10 col-md-11"></div>
			<div id="control_container" class="col-sm-2 col-md-1"></div>
		</div>
		
        <script>
            $(function() {
                window.activeHandler = null;

                // build nav
                for(var i=0; i<appConfig.length; i++) {
                    var cfg = appConfig[i];

                    var li = $("<li>");

                    var a = $("<a>");
                    a.attr("href", "#");
                    a.text(cfg[0]);
                    a.data("cfg", cfg);
                    a.click(function(e) {
                        e.preventDefault();

                        $("#nav_container li").removeClass("active");
                        $(this).parent().addClass("active");

                        if(window.activeHandler)
                            window.activeHandler.stopApp();

                        var cfg = $(this).data("cfg");
                        console.log(cfg);
                        window.activeHandler = new cfg[1](); // instantiate the concrete app class
                        window.activeHandler.runApp('map_container', 'control_container');
                    });
                    a.appendTo(li);

                    $("#nav_container").append(li);

                    if(i == defaultApp) {
                        a.click();
                    }
                }
                

            });
        </script>
    </body>


</html>
